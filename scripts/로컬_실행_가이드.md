# 로컬에서 PDF 변환 실행하기

## ⚠️ 중요: 현재 환경 제약

**Claude Code 웹 환경에서는 Git LFS 파일을 다운로드할 수 없습니다.**

이유:
- Git LFS 바이너리를 설치할 수 없음
- 외부 LFS 서버에 접근할 수 없음
- 114개의 PDF 파일이 모두 LFS 포인터로만 존재

따라서 **로컬 컴퓨터에서 실행**해야 합니다.

---

## 🚀 로컬에서 실행하기 (3가지 방법)

### 방법 1: 자동 스크립트 (가장 쉬움) ⭐

```bash
# 1. 저장소 클론 (아직 안 했다면)
git clone https://github.com/younga1234/20251112-3.git
cd 20251112-3

# 2. 브랜치 체크아웃
git checkout claude/fix-invalid-pdf-base64-011CV5pR2c4vhzE5puifMMC2

# 3. 자동 스크립트 실행 (모든 과정 자동화)
bash scripts/run_conversion.sh

# 4. 변환된 파일 커밋
git add "**/*.txt"
git commit -m "PDF 파일 텍스트 변환"
git push
```

**실행 시간**: 15-30분 (114개 파일)

---

### 방법 2: 수동 단계별 실행

```bash
# 1. Git LFS 설치
sudo apt-get install git-lfs    # Ubuntu/Debian
# brew install git-lfs          # macOS
# choco install git-lfs          # Windows

# 2. Git LFS 초기화
git lfs install

# 3. PDF 파일 다운로드 (1-3GB)
git lfs pull

# 4. PyPDF2 설치
pip install PyPDF2

# 5. 변환 실행
python3 scripts/convert_all_pdfs.py

# 6. 결과 확인
find . -name "*.txt" | wc -l
# 출력: 114 (성공!)

# 7. 커밋
git add "**/*.txt"
git commit -m "PDF 파일 텍스트 변환"
git push
```

---

### 방법 3: Docker 사용 (Git LFS 설치 없이)

```bash
# Docker 컨테이너에서 실행
docker run -it --rm -v "$(pwd):/repo" -w /repo python:3.11 bash

# 컨테이너 내부에서:
apt-get update && apt-get install -y git-lfs
git lfs install
git lfs pull
pip install PyPDF2
python3 scripts/convert_all_pdfs.py
exit

# 호스트에서 커밋
git add "**/*.txt"
git commit -m "PDF 파일 텍스트 변환"
git push
```

---

## 📊 예상 결과

변환 완료 후:

```
변환 완료!
============================================================
전체: 114개
성공: 114개
실패: 0개

✓ 이제 Claude Code에서 .txt 파일들을 안전하게 읽을 수 있습니다!
```

생성된 파일:
```
논문/
├── 三國時代 湖南地域 住居·聚落의 地域性과 變動2012-이동희ㅇ.pdf
├── 三國時代 湖南地域 住居·聚落의 地域性과 變動2012-이동희ㅇ.txt ✓ 새로 생성!
├── 原始ㆍ古代의_爐施設과_住居構造와의_相關性_硏究2003-李民錫ㅇ.pdf
├── 原始ㆍ古代의_爐施設과_住居構造와의_相關性_硏究2003-李民錫ㅇ.txt ✓ 새로 생성!
└── ... (총 114개 TXT 파일)
```

---

## 🔍 변환 확인

```bash
# 변환된 파일 수
find . -name "*.txt" | wc -l

# 특정 파일 확인
cat "논문/三國時代 湖南地域 住居·聚落의 地域性과 變動2012-이동희ㅇ.txt" | head -20

# 파일 크기 확인
du -sh "논문"/*.txt
```

---

## ⚡ 빠른 명령 (복사해서 실행)

```bash
# 한 번에 실행 (Ubuntu/Debian)
git lfs install && \
git lfs pull && \
pip install PyPDF2 && \
python3 scripts/convert_all_pdfs.py && \
echo "✓ 변환 완료!"
```

```bash
# 한 번에 실행 (macOS)
brew install git-lfs && \
git lfs install && \
git lfs pull && \
pip3 install PyPDF2 && \
python3 scripts/convert_all_pdfs.py && \
echo "✓ 변환 완료!"
```

---

## 💡 팁

### 1. 특정 폴더만 변환

```bash
# 논문 폴더만
cd 논문
python3 ../scripts/convert_all_pdfs.py
cd ..
```

### 2. 변환 진행 상황 확인

```bash
# 다른 터미널에서
watch -n 5 'find . -name "*.txt" | wc -l'
```

### 3. 실패한 파일 재시도

```bash
# 스크립트를 다시 실행하면 성공한 파일은 건너뛰고
# 실패한 파일만 재시도합니다
python3 scripts/convert_all_pdfs.py
```

---

## 🚨 문제 해결

### Q: "git-lfs: command not found"

**A:** Git LFS를 설치하세요
```bash
# Ubuntu/Debian
sudo apt-get install git-lfs

# macOS
brew install git-lfs

# Windows
choco install git-lfs
# 또는 https://git-lfs.github.com/ 에서 다운로드
```

### Q: "ModuleNotFoundError: No module named 'PyPDF2'"

**A:** PyPDF2를 설치하세요
```bash
pip install PyPDF2
# 또는
pip3 install PyPDF2
```

### Q: "EOF marker not found" 오류

**A:** PDF 파일이 다운로드되지 않았습니다
```bash
git lfs pull --force
```

### Q: 디스크 공간 부족

**A:** 약 3GB 필요합니다. 공간을 확보하세요
```bash
# 사용 가능한 공간 확인
df -h .
```

---

## ✅ 완료 후

변환이 완료되면:

1. ✅ 114개의 .txt 파일 생성
2. ✅ Claude Code에서 에러 없이 읽기 가능
3. ✅ 검색 및 grep 가능
4. ✅ 버전 관리 용이

커밋 후:
```bash
git add "**/*.txt"
git commit -m "PDF 파일 텍스트 변환 (Claude Code 호환)"
git push
```

이제 Claude Code에서 .txt 파일로 안전하게 읽을 수 있습니다! 🎉

---

## 📞 추가 도움

- **자동 스크립트**: `bash scripts/run_conversion.sh`
- **변환 도구**: `scripts/convert_all_pdfs.py`
- **상세 가이드**: `scripts/Git_LFS_PDF_변환_가이드.md`
- **문제 해결**: `scripts/README.md`
